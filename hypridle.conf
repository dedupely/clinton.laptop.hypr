# This section configures system-wide behavior
general {
    # This command is run when hypridle receives a lock signal, 
    # but we use it here to ensure only one instance of hyprlock runs.
    lock_cmd = pidof hyprlock || hyprlock 

    # Optional: Lock the session before the system suspends (e.g. lid close)
    before_sleep_cmd = loginctl lock-session

    # Optional: Turn the display on after waking from suspend (solves some monitor issues)
    after_sleep_cmd = hyprctl dispatch dpms on 
}

# Listener for IDLE TIMEOUT
listener {
    timeout = 300       # Time in seconds (e.g., 300s = 5 minutes)
    on-timeout = hyprctl dispatch exec hyprlock # Command to run when idle limit reached
    on-resume = hyprctl dispatch dpms on       # Command to run when activity detected
}

# Optional: Listener to turn off the screen after 7 minutes of idle (2 minutes after lock)
listener {
    timeout = 420       # 7 minutes (420 seconds)
    on-timeout = hyprctl dispatch dpms off # Turns off the display (DPMS = Display Power Management Signaling)
    on-resume = hyprctl dispatch dpms on
}
